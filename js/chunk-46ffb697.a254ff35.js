(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46ffb697"],{"539c":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("keep-alive",[s("OneRaid",{attrs:{"raid-id":e.id}})],1)},i=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"raid has-bg-img"},[s("section",{staticClass:"hero section is-fullheight"},[s("div",{staticClass:"container is-fluid"},[e.token&&e.currentRaid&&e.users?s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-one-third"},[s("div",{staticClass:"box"},[s("div",{staticClass:"is-size-3 has-text-centered has-text-black"},[e._v("\n              "+e._s(e.currentRaid["title"])+"\n            ")]),s("div",{staticClass:"is-seze-5 has-text-centered has-text-black"},[e._v("\n              "+e._s(e.currentRaid["description"])+"\n            ")]),s("div",{staticClass:"box has-background-danger has-text-white"},[s("div",{staticClass:"is-size-4"},[e._v("\n                День: "+e._s(e.currentRaid["day"])+"\n              ")]),s("div",{staticClass:"is-size-4"},[e._v("\n                Время: "+e._s(e.currentRaid["time"])+"\n              ")])]),s("div",{staticClass:"is-size-4 has-text-centered has-text-black"},[e._v("\n              Состав\n            ")]),s("div",{staticClass:"box"},e._l(e.currentRaid["users"],function(t){return s("div",{staticClass:"is-size-5 has-text-centered"},e._l(e.users,function(a){return s("div",[a["username"]===t?s("div",[s("table",{staticClass:"table is-hoverable is-fullwidth"},[s("tbody",[s("tr",[s("td",{staticStyle:{width:"32px"}},[s("figure",{staticClass:"image is-32x32 has-text-centered"},[s("ImageClasses",{attrs:{"class-number":a["class"]}})],1)]),s("td",{staticClass:"has-text-left"},[e._v(e._s(a["nickname"]))])])])])]):e._e()])}))}))]),"admin access granted"===e.adminStatus?s("div",{staticClass:"box"},[s("div",{staticClass:"is-size-4 has-text-centered has-text-black"},[e._v("\n              Изменение состава\n            ")]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedUser,expression:"selectedUser"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedUser=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("Выбрать человека")]),e._l(e.users,function(t){return[s("option",{domProps:{value:t["username"]}},[e._v(e._s(t["nickname"]))])]})],2)])]),s("div",{staticClass:"column"},[s("div",{staticClass:"buttons"},[s("div",{staticClass:"button is-success",attrs:{disabled:!e.selectedUser},on:{click:e.AddUserToRaid}},[e._v("\n                    Добавить\n                  ")]),s("div",{staticClass:"button is-danger",attrs:{disabled:!e.selectedUser},on:{click:e.DeleteUserFromRaid}},[e._v("\n                    Убрать\n                  ")])])])])]):e._e(),"admin access granted"===e.adminStatus?s("div",{staticClass:"box"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("Название вещи")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.itemName,expression:"itemName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.itemName},on:{input:function(t){t.target.composing||(e.itemName=t.target.value)}}})])])])]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("Описание")]),s("div",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.itemDescription,expression:"itemDescription"}],staticClass:"textarea",domProps:{value:e.itemDescription},on:{input:function(t){t.target.composing||(e.itemDescription=t.target.value)}}})])])])]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("label",{staticClass:"label"},[e._v("Тип")]),s("div",{staticClass:"field is-grouped"},[s("div",{staticClass:"control"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedItemType,expression:"selectedItemType"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedItemType=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",selected:"",disabled:""}}),s("option",{attrs:{value:"equipment"}},[e._v("Основное")]),s("option",{attrs:{value:"accessories"}},[e._v("Прочее")])])])]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-success",attrs:{disabled:!e.itemName||!e.itemDescription||!e.selectedItemType},on:{click:e.AddItemToRaid}},[e._v("\n                      Добавить в рейд\n                    ")])])])])])]):e._e(),"admin access granted"===e.adminStatus?s("div",{staticClass:"box"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"is-size-4 has-text-centered has-text-black"},[e._v("\n                  Удаление рейда\n                ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.reallyDelete,expression:"reallyDelete"}],staticClass:"input",attrs:{type:"text",placeholder:"ADMIN TOKEN"},domProps:{value:e.reallyDelete},on:{input:function(t){t.target.composing||(e.reallyDelete=t.target.value)}}}),e.reallyDelete===e.applyToken?s("button",{staticClass:"button is-danger",on:{click:e.DeleteRaid}},[e._v("Удалить!")]):e._e()])])]):e._e()]),s("div",{staticClass:"column"},[s("div",{staticClass:"box"},[s("div",{staticClass:"is-size-3 has-text-centered has-text-black"},[e._v("\n              Основное\n            ")]),e._l(e.currentRaid["equipment"],function(t,a){return s("div",[s("div",{staticClass:"box has-background-info",staticStyle:{"margin-bottom":"0"}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-half"},["admin access granted"===e.adminStatus?s("div",{staticClass:"box is-marginless is-paddingless"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.reallyDeleteEquipment[a],expression:"reallyDeleteEquipment[eqindex]"}],staticClass:"input",attrs:{type:"text",placeholder:"ADMIN TOKEN"},domProps:{value:e.reallyDeleteEquipment[a]},on:{input:function(t){t.target.composing||e.$set(e.reallyDeleteEquipment,a,t.target.value)}}}),e.reallyDeleteEquipment[a]===e.applyToken?s("button",{staticClass:"button is-danger",on:{click:function(t){e.DeleteItemFromRaid("equipment",a)}}},[e._v("Удалить!")]):e._e()]):e._e(),s("div",{staticClass:"box tooltip is-tooltip-bottom is-tooltip-multiline",staticStyle:{margin:"0 0 10px 0"},attrs:{"data-tooltip":t["description"]}},[e._v("\n                      "+e._s(t["title"])+"\n                    ")]),s("div",{staticClass:"buttons"},[s("button",{staticClass:"button is-success",on:{click:function(t){e.AddUserToQueue(e.token,a,"equipment")}}},[e._v("\n                        Записаться\n                      ")]),s("button",{staticClass:"button is-danger",attrs:{disabled:!e.checked[a]},on:{click:function(t){e.DeleteUserFromQueue(e.token,a,"equipment")}}},[e._v("\n                        Отписаться\n                      ")]),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checked[a],expression:"checked[eqindex]"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.checked[a])?e._i(e.checked[a],a)>-1:e.checked[a]},on:{change:function(t){var s=e.checked[a],i=t.target,n=!!i.checked;if(Array.isArray(s)){var c=a,l=e._i(s,c);i.checked?l<0&&e.$set(e.checked,a,s.concat([c])):l>-1&&e.$set(e.checked,a,s.slice(0,l).concat(s.slice(l+1)))}else e.$set(e.checked,a,n)}}}),e._v("\n                        Точно?\n                      ")])])]),s("div",{staticClass:"column is-half"},[t["queue"].length>0?s("div",{staticClass:"box"},[s("table",{staticClass:"table is-hoverable is-fullwidth has-text-centered"},e._l(t["queue"],function(t){return s("tbody",[e._l(t,function(t,a){return[e._l(e.users,function(i){return[i["username"]===a?[s("tr",{staticClass:"is-fullwidth"},[s("td",[e._v(e._s(i["nickname"]))]),s("td",{staticClass:"has-text-right"},"granted"===t?[s("span",{staticClass:"tag is-success"},[e._v("Выдано")])]:"skips"===t?[s("span",{staticClass:"tag is-danger"},[e._v("Пропускает")])]:[s("span",{staticClass:"tag is-info"},[e._v("В очереди")])])])]:e._e()]})]})],2)}))]):e._e()])])]),s("br")])})],2),s("div",{staticClass:"box"},[s("div",{staticClass:"is-size-3 has-text-centered has-text-black"},[e._v("\n              Прочее\n            ")]),e._l(e.currentRaid["accessories"],function(t,a){return s("div",[s("div",{staticClass:"box has-background-info",staticStyle:{"margin-bottom":"0"}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-half"},["admin access granted"===e.adminStatus?s("div",{staticClass:"box is-marginless is-paddingless"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.reallyDeleteAccessories[a],expression:"reallyDeleteAccessories[eqindex]"}],staticClass:"input",attrs:{type:"text",placeholder:"ADMIN TOKEN"},domProps:{value:e.reallyDeleteAccessories[a]},on:{input:function(t){t.target.composing||e.$set(e.reallyDeleteAccessories,a,t.target.value)}}}),e.reallyDeleteAccessories[a]===e.applyToken?s("button",{staticClass:"button is-danger",on:{click:function(t){e.DeleteItemFromRaid("accessories",a)}}},[e._v("Удалить!")]):e._e()]):e._e(),s("div",{staticClass:"box tooltip is-tooltip-bottom is-tooltip-multiline",staticStyle:{margin:"0 0 10px 0"},attrs:{"data-tooltip":t["description"]}},[e._v("\n                      "+e._s(t["title"])+"\n                    ")]),s("div",{staticClass:"buttons"},[s("button",{staticClass:"button is-success",on:{click:function(t){e.AddUserToQueue(e.token,a,"accessories")}}},[e._v("\n                        Записаться\n                      ")]),s("button",{staticClass:"button is-danger",attrs:{disabled:!e.checked2[a]},on:{click:function(t){e.DeleteUserFromQueue(e.token,a,"accessories")}}},[e._v("\n                        Отписаться\n                      ")]),s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checked2[a],expression:"checked2[eqindex]"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.checked2[a])?e._i(e.checked2[a],a)>-1:e.checked2[a]},on:{change:function(t){var s=e.checked2[a],i=t.target,n=!!i.checked;if(Array.isArray(s)){var c=a,l=e._i(s,c);i.checked?l<0&&e.$set(e.checked2,a,s.concat([c])):l>-1&&e.$set(e.checked2,a,s.slice(0,l).concat(s.slice(l+1)))}else e.$set(e.checked2,a,n)}}}),e._v("\n                        Точно?\n                      ")])])]),s("div",{staticClass:"column is-half"},[t["queue"].length>0?s("div",{staticClass:"box"},[s("table",{staticClass:"table is-hoverable is-fullwidth has-text-centered"},e._l(t["queue"],function(t){return s("tbody",[e._l(t,function(t,a){return[e._l(e.users,function(i){return[i["username"]===a?[s("tr",{staticClass:"is-fullwidth"},[s("td",[e._v(e._s(i["nickname"]))]),s("td",{staticClass:"has-text-right"},"granted"===t?[s("span",{staticClass:"tag is-success"},[e._v("Выдано")])]:"skips"===t?[s("span",{staticClass:"tag is-danger"},[e._v("Пропускает")])]:[s("span",{staticClass:"tag is-info"},[e._v("В очереди")])])])]:e._e()]})]})],2)}))]):e._e()])])]),s("br")])})],2)])]):e._e()])])])},c=[],l=s("bc3a"),r=s.n(l),o=s("c0d6"),d=(s("41cb"),s("1a01")),u={name:"OneRaid",props:["raidId"],components:{ImageClasses:d["a"]},data:function(){return{checked:[],checked2:[],reallyDeleteEquipment:[],reallyDeleteAccessories:[],reallyDelete:"",applyToken:"PcSAersJxeoZqxQZtGbugA",selectedUser:"",itemName:"",itemDescription:"",selectedItemType:""}},computed:{token:{get(){return o["a"].state.token},set(e){o["a"].commit("updateToken",e)}},adminStatus:{get(){return o["a"].state.adminStatus}},currentRaidId:{get(){return o["a"].state.raidId},set(e){o["a"].commit("updateCurrentRaidId",e)}},currentRaid:{get(){return o["a"].state.raids[this.raidId]}},currentUser:{get(){return o["a"].state.currentUser}},users:{get(){return o["a"].state.users}}},methods:{AddUserToQueue:function(e,t,s){let a=this;r()({method:"post",url:"https://youkai-clan.herokuapp.com/raid/users/queue/",headers:{"Content-Type":"application/json",Authorization:"Token "+e},data:{id:a.currentRaid["id"],username:a.currentUser["username"],item_number:t,status:"queue",queue_type:s,position:a.currentRaid[s][t]["queue"].length}}).then(function(e){o["a"].dispatch("GetAllRaids"),o["a"].dispatch("GetCurrentRaid")})},DeleteUserFromQueue:function(e,t,s){let a=this;r()({method:"delete",url:"https://youkai-clan.herokuapp.com/raid/users/queue/",headers:{"Content-Type":"application/json",Authorization:"Token "+e},data:{id:a.currentRaid["id"],username:a.currentUser["username"],item_number:t,queue_type:s}}).then(function(e){o["a"].dispatch("GetAllRaids"),o["a"].dispatch("GetCurrentRaid")})},AddUserToRaid:function(){let e=this;r()({method:"post",url:"https://youkai-clan.herokuapp.com/raid/users/",headers:{"Content-Type":"application/json",Authorization:"Token "+e.token},data:{id:e.currentRaid["id"],username:e.selectedUser}}).then(function(e){o["a"].dispatch("GetAllRaids"),o["a"].dispatch("GetCurrentRaid")})},DeleteUserFromRaid:function(){let e=this;r()({method:"delete",url:"https://youkai-clan.herokuapp.com/raid/users/",headers:{"Content-Type":"application/json",Authorization:"Token "+e.token},data:{id:e.currentRaid["id"],username:e.selectedUser}}).then(function(e){o["a"].dispatch("GetAllRaids"),o["a"].dispatch("GetCurrentRaid")})},AddItemToRaid:function(){let e=this;r()({method:"put",url:"https://youkai-clan.herokuapp.com/raid/",headers:{"Content-Type":"application/json",Authorization:"Token "+e.token},data:{id:e.currentRaid["id"],type:e.selectedItemType,title:e.itemName,description:e.itemDescription,queue:[]}}).then(function(t){e.selectedItemType="",e.itemName="",e.itemDescription="",o["a"].dispatch("GetAllRaids"),o["a"].dispatch("GetCurrentRaid")})},DeleteItemFromRaid:function(e,t){let s=this;r()({method:"patch",url:"https://youkai-clan.herokuapp.com/raid/",headers:{"Content-Type":"application/json",Authorization:"Token "+s.token},data:{id:s.currentRaid["id"],type:e,item_number:t.toString()}}).then(function(e){s.reallyDeleteEquipment=[],s.reallyDeleteAccessories=[],o["a"].dispatch("GetAllRaids"),o["a"].dispatch("GetCurrentRaid")})},DeleteRaid:function(){let e=this;r()({method:"delete",url:"https://youkai-clan.herokuapp.com/raid/",headers:{"Content-Type":"application/json",Authorization:"Token "+e.token},data:{id:e.currentRaid["id"]}}).then(function(t){e.reallyDelete="",o["a"].dispatch("GetAllRaids"),o["a"].dispatch("GetCurrentRaid")})}},beforeUpdate:function(){this.currentRaidId=this.raidId},created:function(){this.currentRaidId=this.raidId,o["a"].dispatch("GetAllRaids"),o["a"].dispatch("GetCurrentRaid"),o["a"].dispatch("GetUsers"),o["a"].dispatch("GetCurrentUserByToken")}},p=u,m=(s("ace9"),s("2877")),v=Object(m["a"])(p,n,c,!1,null,"71df49e1",null);v.options.__file="OneRaid.vue";var h=v.exports,C={name:"Raids",components:{OneRaid:h},props:["id"]},k=C,b=(s("6292"),Object(m["a"])(k,a,i,!1,null,"106a0586",null));b.options.__file="Raids.vue";t["default"]=b.exports},"5fd2":function(e,t,s){},6292:function(e,t,s){"use strict";var a=s("da31"),i=s.n(a);i.a},ace9:function(e,t,s){"use strict";var a=s("5fd2"),i=s.n(a);i.a},da31:function(e,t,s){}}]);
//# sourceMappingURL=chunk-46ffb697.a254ff35.js.map