(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e2085a2"],{"1dec":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("keep-alive",[a("div",{staticClass:"createnews has-bg-img"},[a("section",{staticClass:"hero section is-fullheight"},[a("div",{staticClass:"container is-fluid"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-6"},[a("div",{staticClass:"box"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Название")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input",attrs:{type:"text",placeholder:"Очень важная новость"},domProps:{value:t.title},on:{input:[function(e){e.target.composing||(t.title=e.target.value)},t.CheckForm]}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Контент")]),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"textarea",attrs:{placeholder:"Очень важная информация"},domProps:{value:t.content},on:{input:[function(e){e.target.composing||(t.content=e.target.value)},t.CheckForm]}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Тип новости")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.tagSelected,expression:"tagSelected"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.tagSelected=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[t._v("Обычная")]),a("option",{attrs:{value:"2"}},[t._v("Важная")]),a("option",{attrs:{value:"3"}},[t._v("Очень важная")])])])])]),a("div",{staticClass:"field"},[a("div",{staticClass:"file"},[a("div",{staticClass:"control"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{type:"file",name:"resume",id:"imageNews"},on:{change:t.GetFilename}}),a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label"},[t._v("\n                          Картинка для новости\n                        ")]),a("span",{staticClass:"file-name"},[t._v(t._s(t.imageFilename))])])])])])]),a("div",{staticClass:"field is-grouped is-grouped-centered"},[a("p",{staticClass:"control"},[a("button",{staticClass:"button is-success",class:{"is-loading":t.isLoading},attrs:{disabled:!t.formValid},on:{click:t.CreateNews}},[t._v("\n                        Создать новость\n                      ")])])]),"ok, ok"===t.result?a("p",{staticClass:"title has-text-success is-size-5 has-text-centered"},[t._v("Создано")]):t._e()])])])])])])])])])},i=[],l=a("c0d6"),n=a("bc3a"),c=a.n(n),o={name:"CreateNews",data:function(){return{title:"",content:"",imageFilename:"",tagSelected:"1",formValid:!1,result:"",isLoading:!1}},computed:{currentUser:{get(){return l["a"].state.currentUser}},token:{get(){return l["a"].state.token}}},methods:{CheckForm:function(){let t=this;t.title&&t.content&&t.imageFilename&&t.tagSelected?t.formValid=!0:t.formValid=!1},CreateNews:function(){let t=this;t.isLoading=!0;let e=new FormData,a=document.querySelector("#imageNews");e.append("image",a.files[0]),e.append("title",t.title),e.append("content",t.content),e.append("author",t.currentUser["nickname"]),e.append("tags",t.tagSelected),c()({method:"post",url:"https://youkai-clan.herokuapp.com/news/",headers:{"Content-Type":"multipart/form-data",Authorization:"Token "+t.token},data:e}).then(function(e){t.result=e.data.message,t.title="",t.content="",t.imageFilename="",t.tagSelected="1",a.value="",t.CheckForm(),t.isLoading=!1})},GetFilename:function(t){let e=this;t.target.files.length>0&&(e.imageFilename=t.target.files[0].name),e.CheckForm()}}},r=o,d=(a("3995"),a("2877")),u=Object(d["a"])(r,s,i,!1,null,"1d882744",null);u.options.__file="CreateNews.vue";e["default"]=u.exports},3041:function(t,e,a){},3995:function(t,e,a){"use strict";var s=a("3041"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-4e2085a2.d358c56e.js.map